{"version":3,"file":"../checkout-110-dev-109.min.js","sources":["checkout-110-dev-109.js"],"sourcesContent":["/* global wc_checkout_params */\njQuery( function( $ ) {\n\n\t// wc_checkout_params is required to continue, ensure the object exists\n\tif ( typeof wc_checkout_params === 'undefined' ) {\n\t\treturn false;\n\t}\n\n\t$.blockUI.defaults.overlayCSS.cursor = 'default';\n\n\tvar wc_checkout_form = {\n\t\tupdateTimer: false,\n\t\tdirtyInput: false,\n\t\tselectedPaymentMethod: false,\n\t\txhr: false,\n\t\t$order_review: $( '#order_review' ),\n\t\t$checkout_form: $( 'form.checkout' ),\n\t\tinit: function() {\n\t\t\t$( document.body ).bind( 'update_checkout', this.update_checkout );\n\t\t\t$( document.body ).bind( 'init_checkout', this.init_checkout );\n\n\t\t\t// Payment methods\n\t\t\tthis.$checkout_form.on( 'click', 'input[name=\"payment_method\"]', this.payment_method_selected );\n\n\t\t\tif ( $( document.body ).hasClass( 'woocommerce-order-pay' ) ) {\n\t\t\t\tthis.$order_review.on( 'click', 'input[name=\"payment_method\"]', this.payment_method_selected );\n\t\t\t\tthis.$order_review.on( 'submit', this.submitOrder );\n\t\t\t\tthis.$order_review.attr( 'novalidate', 'novalidate' );\n\t\t\t}\n\n\t\t\t// Prevent HTML5 validation which can conflict.\n\t\t\tthis.$checkout_form.attr( 'novalidate', 'novalidate' );\n\n\t\t\t// Form submission\n\t\t\tthis.$checkout_form.on( 'submit', this.submit );\n\n\t\t\t// Inline validation\n\t\t\tthis.$checkout_form.on( 'input validate change', '.input-text, select, input:checkbox', this.validate_field );\n\n\t\t\t// Manual trigger\n\t\t\tthis.$checkout_form.on( 'update', this.trigger_update_checkout );\n\n\t\t\t// Inputs/selects which update totals\n            // CHANGE: Removed selector `#ship-to-different-address input`\n\t\t\tthis.$checkout_form.on( 'change', 'select.shipping_method, input[name^=\"shipping_method\"], .update_totals_on_change select, .update_totals_on_change input[type=\"radio\"], .update_totals_on_change input[type=\"checkbox\"]', this.trigger_update_checkout ); // eslint-disable-line max-len\n\t\t\tthis.$checkout_form.on( 'change', '.address-field select', this.input_changed );\n\t\t\tthis.$checkout_form.on( 'change', '.address-field input.input-text, .update_totals_on_change input.input-text', this.maybe_input_changed ); // eslint-disable-line max-len\n\t\t\tthis.$checkout_form.on( 'keydown', '.address-field input.input-text, .update_totals_on_change input.input-text', this.queue_update_checkout ); // eslint-disable-line max-len\n\n\t\t\t// CHANGE: Removed shipping to different address checkout `change` listener\n\n\t\t\t// Trigger events\n            // CHANGE: Removed shipping to different address checkout `change` trigger\n\t\t\tthis.init_payment_methods();\n\n\t\t\t// Update on page load\n\t\t\tif ( wc_checkout_params.is_checkout === '1' ) {\n\t\t\t\t$( document.body ).trigger( 'init_checkout' );\n\t\t\t}\n\t\t\tif ( wc_checkout_params.option_guest_checkout === 'yes' ) {\n\t\t\t\t$( 'input#createaccount' ).change( this.toggle_create_account ).change();\n\t\t\t}\n\t\t},\n\t\tinit_payment_methods: function() {\n\t\t\tvar $payment_methods = $( '.woocommerce-checkout' ).find( 'input[name=\"payment_method\"]' );\n\n\t\t\t// If there is one method, we can hide the radio input\n\t\t\tif ( 1 === $payment_methods.length ) {\n\t\t\t\t$payment_methods.eq(0).hide();\n\t\t\t}\n\n\t\t\t// If there was a previously selected method, check that one.\n\t\t\tif ( wc_checkout_form.selectedPaymentMethod ) {\n\t\t\t\t$( '#' + wc_checkout_form.selectedPaymentMethod ).prop( 'checked', true );\n\t\t\t}\n\n\t\t\t// If there are none selected, select the first.\n\t\t\tif ( 0 === $payment_methods.filter( ':checked' ).length ) {\n\t\t\t\t$payment_methods.eq(0).prop( 'checked', true );\n\t\t\t}\n\n\t\t\t// Get name of new selected method.\n\t\t\tvar checkedPaymentMethod = $payment_methods.filter( ':checked' ).eq(0).prop( 'id' );\n\n\t\t\tif ( $payment_methods.length > 1 ) {\n\t\t\t\t// Hide open descriptions.\n\t\t\t\t$( 'div.payment_box:not(\".' + checkedPaymentMethod + '\")' ).filter( ':visible' ).slideUp( 0 );\n\t\t\t}\n\n\t\t\t// Trigger click event for selected method\n\t\t\t$payment_methods.filter( ':checked' ).eq(0).trigger( 'click' );\n\t\t},\n\t\tget_payment_method: function() {\n\t\t\treturn wc_checkout_form.$checkout_form.find( 'input[name=\"payment_method\"]:checked' ).val();\n\t\t},\n\t\tpayment_method_selected: function( e ) {\n\t\t\te.stopPropagation();\n\n\t\t\tif ( $( '.payment_methods input.input-radio' ).length > 1 ) {\n\t\t\t\tvar target_payment_box = $( 'div.payment_box.' + $( this ).attr( 'ID' ) ),\n\t\t\t\t\tis_checked         = $( this ).is( ':checked' );\n\n\t\t\t\tif ( is_checked && ! target_payment_box.is( ':visible' ) ) {\n\t\t\t\t\t$( 'div.payment_box' ).filter( ':visible' ).slideUp( 230 );\n\n\t\t\t\t\tif ( is_checked ) {\n\t\t\t\t\t\ttarget_payment_box.slideDown( 230 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$( 'div.payment_box' ).show();\n\t\t\t}\n\n\t\t\tif ( $( this ).data( 'order_button_text' ) ) {\n\t\t\t\t$( '#place_order' ).text( $( this ).data( 'order_button_text' ) );\n\t\t\t} else {\n\t\t\t\t$( '#place_order' ).text( $( '#place_order' ).data( 'value' ) );\n\t\t\t}\n\n\t\t\tvar selectedPaymentMethod = $( '.woocommerce-checkout input[name=\"payment_method\"]:checked' ).attr( 'id' );\n\n\t\t\tif ( selectedPaymentMethod !== wc_checkout_form.selectedPaymentMethod ) {\n\t\t\t\t$( document.body ).trigger( 'payment_method_selected' );\n\t\t\t}\n\n\t\t\twc_checkout_form.selectedPaymentMethod = selectedPaymentMethod;\n\t\t},\n\t\ttoggle_create_account: function() {\n\t\t\t$( 'div.create-account' ).hide();\n\n\t\t\tif ( $( this ).is( ':checked' ) ) {\n\t\t\t\t// Ensure password is not pre-populated.\n\t\t\t\t$( '#account_password' ).val( '' ).change();\n\t\t\t\t$( 'div.create-account' ).slideDown();\n\t\t\t}\n\t\t},\n\t\tinit_checkout: function() {\n\t\t\t$( document.body ).trigger( 'update_checkout' );\n\t\t},\n\t\tmaybe_input_changed: function( e ) {\n\t\t\tif ( wc_checkout_form.dirtyInput ) {\n\t\t\t\twc_checkout_form.input_changed( e );\n\t\t\t}\n\t\t},\n\t\tinput_changed: function( e ) {\n\t\t\twc_checkout_form.dirtyInput = e.target;\n\t\t\twc_checkout_form.maybe_update_checkout();\n\t\t},\n\t\tqueue_update_checkout: function( e ) {\n\t\t\tvar code = e.keyCode || e.which || 0;\n\n\t\t\tif ( code === 9 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\twc_checkout_form.dirtyInput = this;\n\t\t\twc_checkout_form.reset_update_checkout_timer();\n\t\t\twc_checkout_form.updateTimer = setTimeout( wc_checkout_form.maybe_update_checkout, '1000' );\n\t\t},\n\t\ttrigger_update_checkout: function() {\n\t\t\twc_checkout_form.reset_update_checkout_timer();\n\t\t\twc_checkout_form.dirtyInput = false;\n\t\t\t$( document.body ).trigger( 'update_checkout' );\n\t\t},\n\t\tmaybe_update_checkout: function() {\n\t\t\tvar update_totals = true;\n\n\t\t\tif ( $( wc_checkout_form.dirtyInput ).length ) {\n\t\t\t\tvar $required_inputs = $( wc_checkout_form.dirtyInput ).closest( 'div' ).find( '.address-field.validate-required' );\n\n\t\t\t\tif ( $required_inputs.length ) {\n\t\t\t\t\t$required_inputs.each( function() {\n\t\t\t\t\t\tif ( $( this ).find( 'input.input-text' ).val() === '' ) {\n\t\t\t\t\t\t\tupdate_totals = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( update_totals ) {\n\t\t\t\twc_checkout_form.trigger_update_checkout();\n\t\t\t}\n\t\t},\n        // CHANGE: Removed shipping to different address checkout `change` listener handler function\n\t\treset_update_checkout_timer: function() {\n\t\t\tclearTimeout( wc_checkout_form.updateTimer );\n\t\t},\n\t\tis_valid_json: function( raw_json ) {\n\t\t\ttry {\n\t\t\t\tvar json = JSON.parse( raw_json );\n\n\t\t\t\treturn ( json && 'object' === typeof json );\n\t\t\t} catch ( e ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tvalidate_field: function( e ) {\n\t\t\tvar $this             = $( this ),\n\t\t\t\t$parent           = $this.closest( '.form-row' ),\n\t\t\t\tvalidated         = true,\n\t\t\t\tvalidate_required = $parent.is( '.validate-required' ),\n\t\t\t\tvalidate_email    = $parent.is( '.validate-email' ),\n\t\t\t\tevent_type        = e.type;\n\n\t\t\tif ( 'input' === event_type ) {\n\t\t\t\t$parent.removeClass( 'woocommerce-invalid woocommerce-invalid-required-field woocommerce-invalid-email woocommerce-validated' ); // eslint-disable-line max-len\n\t\t\t}\n\n\t\t\tif ( 'validate' === event_type || 'change' === event_type ) {\n\n\t\t\t\tif ( validate_required ) {\n\t\t\t\t\tif ( 'checkbox' === $this.attr( 'type' ) && ! $this.is( ':checked' ) ) {\n\t\t\t\t\t\t$parent.removeClass( 'woocommerce-validated' ).addClass( 'woocommerce-invalid woocommerce-invalid-required-field' );\n\t\t\t\t\t\tvalidated = false;\n\t\t\t\t\t} else if ( $this.val() === '' ) {\n\t\t\t\t\t\t$parent.removeClass( 'woocommerce-validated' ).addClass( 'woocommerce-invalid woocommerce-invalid-required-field' );\n\t\t\t\t\t\tvalidated = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( validate_email ) {\n\t\t\t\t\tif ( $this.val() ) {\n\t\t\t\t\t\t/* https://stackoverflow.com/questions/2855865/jquery-validate-e-mail-address-regex */\n\t\t\t\t\t\tvar pattern = new RegExp(/^([a-z\\d!#$%&'*+\\-\\/=?^_`{|}~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+(\\.[a-z\\d!#$%&'*+\\-\\/=?^_`{|}~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+)*|\"((([ \\t]*\\r\\n)?[ \\t]+)?([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))*(([ \\t]*\\r\\n)?[ \\t]+)?\")@(([a-z\\d\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|[a-z\\d\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF][a-z\\d\\-._~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]*[a-z\\d\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])\\.)+([a-z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|[a-z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF][a-z\\d\\-._~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]*[0-9a-z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])\\.?$/i); // eslint-disable-line max-len\n\n\t\t\t\t\t\tif ( ! pattern.test( $this.val()  ) ) {\n\t\t\t\t\t\t\t$parent.removeClass( 'woocommerce-validated' ).addClass( 'woocommerce-invalid woocommerce-invalid-email' );\n\t\t\t\t\t\t\tvalidated = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( validated ) {\n\t\t\t\t\t$parent.removeClass( 'woocommerce-invalid woocommerce-invalid-required-field woocommerce-invalid-email' ).addClass( 'woocommerce-validated' ); // eslint-disable-line max-len\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tupdate_checkout: function( event, args ) {\n\t\t\t// Small timeout to prevent multiple requests when several fields update at the same time\n\t\t\twc_checkout_form.reset_update_checkout_timer();\n\t\t\twc_checkout_form.updateTimer = setTimeout( wc_checkout_form.update_checkout_action, '5', args );\n\t\t},\n\t\tupdate_checkout_action: function( args ) {\n\t\t\tif ( wc_checkout_form.xhr ) {\n\t\t\t\twc_checkout_form.xhr.abort();\n\t\t\t}\n\n\t\t\tif ( $( 'form.checkout' ).length === 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\targs = typeof args !== 'undefined' ? args : {\n\t\t\t\tupdate_shipping_method: true\n\t\t\t};\n\n\t\t\tvar country\t\t\t = $( '#billing_country' ).val(),\n\t\t\t\tstate\t\t\t = $( '#billing_state' ).val(),\n\t\t\t\tpostcode\t\t = $( ':input#billing_postcode' ).val(),\n\t\t\t\tcity\t\t\t = $( '#billing_city' ).val(),\n\t\t\t\taddress\t\t\t = $( ':input#billing_address_1' ).val(),\n\t\t\t\taddress_2\t\t = $( ':input#billing_address_2' ).val(),\n\t\t\t\t// CHANGE: Always get shipping address values from shipping fields\n                s_country\t\t = $( '#shipping_country' ).val(),\n\t\t\t\ts_state\t\t\t = $( '#shipping_state' ).val(),\n\t\t\t\ts_postcode\t\t = $( ':input#shipping_postcode' ).val(),\n\t\t\t\ts_city\t\t\t = $( '#shipping_city' ).val(),\n\t\t\t\ts_address\t\t = $( ':input#shipping_address_1' ).val(),\n\t\t\t\ts_address_2\t\t = $( ':input#shipping_address_2' ).val(),\n\t\t\t\t$required_inputs = $( wc_checkout_form.$checkout_form ).find( '.address-field.validate-required:visible' ),\n\t\t\t\thas_full_address = true;\n\n\t\t\tif ( $required_inputs.length ) {\n\t\t\t\t$required_inputs.each( function() {\n\t\t\t\t\tif ( $( this ).find( ':input' ).val() === '' ) {\n\t\t\t\t\t\thas_full_address = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n            // CHANGE: Removed if handling of different shipping address checkbox, always get shipping address values from shipping fields (see above)\n\n\t\t\tvar data = {\n\t\t\t\tsecurity        : wc_checkout_params.update_order_review_nonce,\n\t\t\t\tpayment_method  : wc_checkout_form.get_payment_method(),\n\t\t\t\tcountry         : country,\n\t\t\t\tstate           : state,\n\t\t\t\tpostcode        : postcode,\n\t\t\t\tcity            : city,\n\t\t\t\taddress         : address,\n\t\t\t\taddress_2       : address_2,\n\t\t\t\ts_country       : s_country,\n\t\t\t\ts_state         : s_state,\n\t\t\t\ts_postcode      : s_postcode,\n\t\t\t\ts_city          : s_city,\n\t\t\t\ts_address       : s_address,\n\t\t\t\ts_address_2     : s_address_2,\n\t\t\t\thas_full_address: has_full_address,\n\t\t\t\tpost_data       : $( 'form.checkout' ).serialize()\n\t\t\t};\n\n\t\t\tif ( false !== args.update_shipping_method ) {\n\t\t\t\tvar shipping_methods = {};\n\n\t\t\t\t// eslint-disable-next-line max-len\n\t\t\t\t$( 'select.shipping_method, input[name^=\"shipping_method\"][type=\"radio\"]:checked, input[name^=\"shipping_method\"][type=\"hidden\"]' ).each( function() {\n\t\t\t\t\tshipping_methods[ $( this ).data( 'index' ) ] = $( this ).val();\n\t\t\t\t} );\n\n\t\t\t\tdata.shipping_method = shipping_methods;\n\t\t\t}\n\n\t\t\t$( '.woocommerce-checkout-payment, .woocommerce-checkout-review-order-table' ).block({\n\t\t\t\tmessage: null,\n\t\t\t\toverlayCSS: {\n\t\t\t\t\tbackground: '#fff',\n\t\t\t\t\topacity: 0.6\n\t\t\t\t}\n\t\t\t});\n\n\t\t\twc_checkout_form.xhr = $.ajax({\n\t\t\t\ttype:\t\t'POST',\n\t\t\t\turl:\t\twc_checkout_params.wc_ajax_url.toString().replace( '%%endpoint%%', 'update_order_review' ),\n\t\t\t\tdata:\t\tdata,\n\t\t\t\tsuccess:\tfunction( data ) {\n\n\t\t\t\t\t// Reload the page if requested\n\t\t\t\t\tif ( data && true === data.reload ) {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Remove any notices added previously\n\t\t\t\t\t$( '.woocommerce-NoticeGroup-updateOrderReview' ).remove();\n\n\t\t\t\t\tvar termsCheckBoxChecked = $( '#terms' ).prop( 'checked' );\n\n\t\t\t\t\t// Save payment details to a temporary object\n\t\t\t\t\tvar paymentDetails = {};\n\t\t\t\t\t$( '.payment_box :input' ).each( function() {\n\t\t\t\t\t\tvar ID = $( this ).attr( 'id' );\n\n\t\t\t\t\t\tif ( ID ) {\n\t\t\t\t\t\t\tif ( $.inArray( $( this ).attr( 'type' ), [ 'checkbox', 'radio' ] ) !== -1 ) {\n\t\t\t\t\t\t\t\tpaymentDetails[ ID ] = $( this ).prop( 'checked' );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tpaymentDetails[ ID ] = $( this ).val();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// Always update the fragments\n\t\t\t\t\tif ( data && data.fragments ) {\n\t\t\t\t\t\t$.each( data.fragments, function ( key, value ) {\n\t\t\t\t\t\t\tif ( ! wc_checkout_form.fragments || wc_checkout_form.fragments[ key ] !== value ) {\n\t\t\t\t\t\t\t\t$( key ).replaceWith( value );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$( key ).unblock();\n\t\t\t\t\t\t} );\n\t\t\t\t\t\twc_checkout_form.fragments = data.fragments;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Recheck the terms and conditions box, if needed\n\t\t\t\t\tif ( termsCheckBoxChecked ) {\n\t\t\t\t\t\t$( '#terms' ).prop( 'checked', true );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Fill in the payment details if possible without overwriting data if set.\n\t\t\t\t\tif ( ! $.isEmptyObject( paymentDetails ) ) {\n\t\t\t\t\t\t$( '.payment_box :input' ).each( function() {\n\t\t\t\t\t\t\tvar ID = $( this ).attr( 'id' );\n\t\t\t\t\t\t\tif ( ID ) {\n\t\t\t\t\t\t\t\tif ( $.inArray( $( this ).attr( 'type' ), [ 'checkbox', 'radio' ] ) !== -1 ) {\n\t\t\t\t\t\t\t\t\t$( this ).prop( 'checked', paymentDetails[ ID ] ).change();\n\t\t\t\t\t\t\t\t} else if ( $.inArray( $( this ).attr( 'type' ), [ 'select' ] ) !== -1 ) {\n\t\t\t\t\t\t\t\t\t$( this ).val( paymentDetails[ ID ] ).change();\n\t\t\t\t\t\t\t\t} else if ( null !== $( this ).val() && 0 === $( this ).val().length ) {\n\t\t\t\t\t\t\t\t\t$( this ).val( paymentDetails[ ID ] ).change();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check for error\n\t\t\t\t\tif ( data && 'failure' === data.result ) {\n\n\t\t\t\t\t\tvar $form = $( 'form.checkout' );\n\n\t\t\t\t\t\t// Remove notices from all sources\n\t\t\t\t\t\t$( '.woocommerce-error, .woocommerce-message' ).remove();\n\n\t\t\t\t\t\t// Add new errors returned by this event\n\t\t\t\t\t\tif ( data.messages ) {\n\t\t\t\t\t\t\t$form.prepend( '<div class=\"woocommerce-NoticeGroup woocommerce-NoticeGroup-updateOrderReview\">' + data.messages + '</div>' ); // eslint-disable-line max-len\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$form.prepend( data );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Lose focus for all fields\n\t\t\t\t\t\t$form.find( '.input-text, select, input:checkbox' ).trigger( 'validate' ).blur();\n\n\t\t\t\t\t\twc_checkout_form.scroll_to_notices();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Re-init methods\n\t\t\t\t\twc_checkout_form.init_payment_methods();\n\n\t\t\t\t\t// Fire updated_checkout event.\n\t\t\t\t\t$( document.body ).trigger( 'updated_checkout', [ data ] );\n\t\t\t\t}\n\n\t\t\t});\n\t\t},\n\t\thandleUnloadEvent: function( e ) {\n\t\t\t// Modern browsers have their own standard generic messages that they will display.\n\t\t\t// Confirm, alert, prompt or custom message are not allowed during the unload event\n\t\t\t// Browsers will display their own standard messages\n\n\t\t\t// Check if the browser is Internet Explorer\n\t\t\tif((navigator.userAgent.indexOf('MSIE') !== -1 ) || (!!document.documentMode)) {\n\t\t\t\t// IE handles unload events differently than modern browsers\n\t\t\t\te.preventDefault();\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\tattachUnloadEventsOnSubmit: function() {\n\t\t\t$( window ).on('beforeunload', this.handleUnloadEvent);\n\t\t},\n\t\tdetachUnloadEventsOnSubmit: function() {\n\t\t\t$( window ).unbind('beforeunload', this.handleUnloadEvent);\n\t\t},\n\t\tblockOnSubmit: function( $form ) {\n\t\t\tvar form_data = $form.data();\n\n\t\t\tif ( 1 !== form_data['blockUI.isBlocked'] ) {\n\t\t\t\t$form.block({\n\t\t\t\t\tmessage: null,\n\t\t\t\t\toverlayCSS: {\n\t\t\t\t\t\tbackground: '#fff',\n\t\t\t\t\t\topacity: 0.6\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tsubmitOrder: function() {\n\t\t\twc_checkout_form.blockOnSubmit( $( this ) );\n\t\t},\n\t\tsubmit: function() {\n\t\t\twc_checkout_form.reset_update_checkout_timer();\n\t\t\tvar $form = $( this );\n\n\t\t\tif ( $form.is( '.processing' ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Trigger a handler to let gateways manipulate the checkout if needed\n\t\t\t// eslint-disable-next-line max-len\n\t\t\tif ( $form.triggerHandler( 'checkout_place_order' ) !== false && $form.triggerHandler( 'checkout_place_order_' + wc_checkout_form.get_payment_method() ) !== false ) {\n\n\t\t\t\t$form.addClass( 'processing' );\n\n\t\t\t\twc_checkout_form.blockOnSubmit( $form );\n\n\t\t\t\t// Attach event to block reloading the page when the form has been submitted\n\t\t\t\twc_checkout_form.attachUnloadEventsOnSubmit();\n\n\t\t\t\t// ajaxSetup is global, but we use it to ensure JSON is valid once returned.\n\t\t\t\t$.ajaxSetup( {\n\t\t\t\t\tdataFilter: function( raw_response, dataType ) {\n\t\t\t\t\t\t// We only want to work with JSON\n\t\t\t\t\t\tif ( 'json' !== dataType ) {\n\t\t\t\t\t\t\treturn raw_response;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( wc_checkout_form.is_valid_json( raw_response ) ) {\n\t\t\t\t\t\t\treturn raw_response;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Attempt to fix the malformed JSON\n\t\t\t\t\t\t\tvar maybe_valid_json = raw_response.match( /{\"result.*}/ );\n\n\t\t\t\t\t\t\tif ( null === maybe_valid_json ) {\n\t\t\t\t\t\t\t\tconsole.log( 'Unable to fix malformed JSON' );\n\t\t\t\t\t\t\t} else if ( wc_checkout_form.is_valid_json( maybe_valid_json[0] ) ) {\n\t\t\t\t\t\t\t\tconsole.log( 'Fixed malformed JSON. Original:' );\n\t\t\t\t\t\t\t\tconsole.log( raw_response );\n\t\t\t\t\t\t\t\traw_response = maybe_valid_json[0];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconsole.log( 'Unable to fix malformed JSON' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn raw_response;\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\t$.ajax({\n\t\t\t\t\ttype:\t\t'POST',\n\t\t\t\t\turl:\t\twc_checkout_params.checkout_url,\n\t\t\t\t\tdata:\t\t$form.serialize(),\n\t\t\t\t\tdataType:   'json',\n\t\t\t\t\tsuccess:\tfunction( result ) {\n\t\t\t\t\t\t// Detach the unload handler that prevents a reload / redirect\n\t\t\t\t\t\twc_checkout_form.detachUnloadEventsOnSubmit();\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif ( 'success' === result.result && $form.triggerHandler( 'checkout_place_order_success' ) !== false ) {\n\t\t\t\t\t\t\t\tif ( -1 === result.redirect.indexOf( 'https://' ) || -1 === result.redirect.indexOf( 'http://' ) ) {\n\t\t\t\t\t\t\t\t\twindow.location = result.redirect;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\twindow.location = decodeURI( result.redirect );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( 'failure' === result.result ) {\n\t\t\t\t\t\t\t\tthrow 'Result failure';\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthrow 'Invalid response';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch( err ) {\n\t\t\t\t\t\t\t// Reload page\n\t\t\t\t\t\t\tif ( true === result.reload ) {\n\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Trigger update in case we need a fresh nonce\n\t\t\t\t\t\t\tif ( true === result.refresh ) {\n\t\t\t\t\t\t\t\t$( document.body ).trigger( 'update_checkout' );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Add new errors\n\t\t\t\t\t\t\tif ( result.messages ) {\n\t\t\t\t\t\t\t\twc_checkout_form.submit_error( result.messages );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twc_checkout_form.submit_error( '<div class=\"woocommerce-error\">' + wc_checkout_params.i18n_checkout_error + '</div>' ); // eslint-disable-line max-len\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terror:\tfunction( jqXHR, textStatus, errorThrown ) {\n\t\t\t\t\t\t// Detach the unload handler that prevents a reload / redirect\n\t\t\t\t\t\twc_checkout_form.detachUnloadEventsOnSubmit();\n\n\t\t\t\t\t\twc_checkout_form.submit_error( '<div class=\"woocommerce-error\">' + errorThrown + '</div>' );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tsubmit_error: function( error_message ) {\n\t\t\t$( '.woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message' ).remove();\n\t\t\twc_checkout_form.$checkout_form.prepend( '<div class=\"woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout\">' + error_message + '</div>' ); // eslint-disable-line max-len\n\t\t\twc_checkout_form.$checkout_form.removeClass( 'processing' ).unblock();\n\t\t\twc_checkout_form.$checkout_form.find( '.input-text, select, input:checkbox' ).trigger( 'validate' ).blur();\n\t\t\twc_checkout_form.scroll_to_notices();\n\t\t\t$( document.body ).trigger( 'checkout_error' , [ error_message ] );\n\t\t},\n\t\tscroll_to_notices: function() {\n\t\t\tvar scrollElement           = $( '.woocommerce-NoticeGroup-updateOrderReview, .woocommerce-NoticeGroup-checkout' );\n\n\t\t\tif ( ! scrollElement.length ) {\n\t\t\t\tscrollElement = $( '.form.checkout' );\n\t\t\t}\n\t\t\t$.scroll_to_notices( scrollElement );\n\t\t}\n\t};\n\n\tvar wc_checkout_coupons = {\n\t\tinit: function() {\n\t\t\t$( document.body ).on( 'click', 'a.showcoupon', this.show_coupon_form );\n\t\t\t$( document.body ).on( 'click', '.woocommerce-remove-coupon', this.remove_coupon );\n\t\t\t$( 'form.checkout_coupon' ).hide().submit( this.submit );\n\t\t},\n\t\tshow_coupon_form: function() {\n\t\t\t$( '.checkout_coupon' ).slideToggle( 400, function() {\n\t\t\t\t$( '.checkout_coupon' ).find( ':input:eq(0)' ).focus();\n\t\t\t});\n\t\t\treturn false;\n\t\t},\n\t\tsubmit: function() {\n\t\t\tvar $form = $( this );\n\n\t\t\tif ( $form.is( '.processing' ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t$form.addClass( 'processing' ).block({\n\t\t\t\tmessage: null,\n\t\t\t\toverlayCSS: {\n\t\t\t\t\tbackground: '#fff',\n\t\t\t\t\topacity: 0.6\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar data = {\n\t\t\t\tsecurity:\t\twc_checkout_params.apply_coupon_nonce,\n\t\t\t\tcoupon_code:\t$form.find( 'input[name=\"coupon_code\"]' ).val()\n\t\t\t};\n\n\t\t\t$.ajax({\n\t\t\t\ttype:\t\t'POST',\n\t\t\t\turl:\t\twc_checkout_params.wc_ajax_url.toString().replace( '%%endpoint%%', 'apply_coupon' ),\n\t\t\t\tdata:\t\tdata,\n\t\t\t\tsuccess:\tfunction( code ) {\n\t\t\t\t\t$( '.woocommerce-error, .woocommerce-message' ).remove();\n\t\t\t\t\t$form.removeClass( 'processing' ).unblock();\n\n\t\t\t\t\tif ( code ) {\n\t\t\t\t\t\t$form.before( code );\n\t\t\t\t\t\t$form.slideUp();\n\n\t\t\t\t\t\t$( document.body ).trigger( 'applied_coupon_in_checkout', [ data.coupon_code ] );\n\t\t\t\t\t\t$( document.body ).trigger( 'update_checkout', { update_shipping_method: false } );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdataType: 'html'\n\t\t\t});\n\n\t\t\treturn false;\n\t\t},\n\t\tremove_coupon: function( e ) {\n\t\t\te.preventDefault();\n\n\t\t\tvar container = $( this ).parents( '.woocommerce-checkout-review-order' ),\n\t\t\t\tcoupon    = $( this ).data( 'coupon' );\n\n\t\t\tcontainer.addClass( 'processing' ).block({\n\t\t\t\tmessage: null,\n\t\t\t\toverlayCSS: {\n\t\t\t\t\tbackground: '#fff',\n\t\t\t\t\topacity: 0.6\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar data = {\n\t\t\t\tsecurity: wc_checkout_params.remove_coupon_nonce,\n\t\t\t\tcoupon:   coupon\n\t\t\t};\n\n\t\t\t$.ajax({\n\t\t\t\ttype:    'POST',\n\t\t\t\turl:     wc_checkout_params.wc_ajax_url.toString().replace( '%%endpoint%%', 'remove_coupon' ),\n\t\t\t\tdata:    data,\n\t\t\t\tsuccess: function( code ) {\n\t\t\t\t\t$( '.woocommerce-error, .woocommerce-message' ).remove();\n\t\t\t\t\tcontainer.removeClass( 'processing' ).unblock();\n\n\t\t\t\t\tif ( code ) {\n\t\t\t\t\t\t$( 'form.woocommerce-checkout' ).before( code );\n\n\t\t\t\t\t\t$( document.body ).trigger( 'removed_coupon_in_checkout', [ data.coupon_code ] );\n\t\t\t\t\t\t$( document.body ).trigger( 'update_checkout', { update_shipping_method: false } );\n\n\t\t\t\t\t\t// Remove coupon code from coupon field\n\t\t\t\t\t\t$( 'form.checkout_coupon' ).find( 'input[name=\"coupon_code\"]' ).val( '' );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function ( jqXHR ) {\n\t\t\t\t\tif ( wc_checkout_params.debug_mode ) {\n\t\t\t\t\t\t/* jshint devel: true */\n\t\t\t\t\t\tconsole.log( jqXHR.responseText );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdataType: 'html'\n\t\t\t});\n\t\t}\n\t};\n\n\tvar wc_checkout_login_form = {\n\t\tinit: function() {\n\t\t\t$( document.body ).on( 'click', 'a.showlogin', this.show_login_form );\n\t\t},\n\t\tshow_login_form: function() {\n\t\t\t$( 'form.login, form.woocommerce-form--login' ).slideToggle();\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tvar wc_terms_toggle = {\n\t\tinit: function() {\n\t\t\t$( document.body ).on( 'click', 'a.woocommerce-terms-and-conditions-link', this.toggle_terms );\n\t\t},\n\n\t\ttoggle_terms: function() {\n\t\t\tif ( $( '.woocommerce-terms-and-conditions' ).length ) {\n\t\t\t\t$( '.woocommerce-terms-and-conditions' ).slideToggle( function() {\n\t\t\t\t\tvar link_toggle = $( '.woocommerce-terms-and-conditions-link' );\n\n\t\t\t\t\tif ( $( '.woocommerce-terms-and-conditions' ).is( ':visible' ) ) {\n\t\t\t\t\t\tlink_toggle.addClass( 'woocommerce-terms-and-conditions-link--open' );\n\t\t\t\t\t\tlink_toggle.removeClass( 'woocommerce-terms-and-conditions-link--closed' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlink_toggle.removeClass( 'woocommerce-terms-and-conditions-link--open' );\n\t\t\t\t\t\tlink_toggle.addClass( 'woocommerce-terms-and-conditions-link--closed' );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\twc_checkout_form.init();\n\twc_checkout_coupons.init();\n\twc_checkout_login_form.init();\n\twc_terms_toggle.init();\n});\n"],"names":["jQuery","$","wc_checkout_params","wc_checkout_form","updateTimer","blockUI","defaults","overlayCSS","cursor","dirtyInput","selectedPaymentMethod","xhr","$order_review","$checkout_form","init","document","body","bind","this","update_checkout","init_checkout","on","payment_method_selected","hasClass","submitOrder","attr","submit","validate_field","trigger_update_checkout","input_changed","maybe_input_changed","queue_update_checkout","init_payment_methods","is_checkout","trigger","option_guest_checkout","change","toggle_create_account","$payment_methods","find","length","eq","hide","prop","filter","checkedPaymentMethod","slideUp","get_payment_method","val","e","target_payment_box","is_checked","stopPropagation","is","slideDown","show","data","text","target","maybe_update_checkout","keyCode","which","reset_update_checkout_timer","setTimeout","$required_inputs","update_totals","closest","each","clearTimeout","is_valid_json","raw_json","json","JSON","parse","$this","$parent","validated","validate_required","validate_email","event_type","type","removeClass","addClass","RegExp","test","event","args","update_checkout_action","country","state","postcode","city","address","address_2","s_country","s_state","s_postcode","s_city","s_address","s_address_2","has_full_address","shipping_methods","abort","update_shipping_method","security","update_order_review_nonce","payment_method","post_data","serialize","shipping_method","block","message","background","opacity","ajax","url","wc_ajax_url","toString","replace","success","termsCheckBoxChecked","paymentDetails","$form","reload","window","location","remove","ID","inArray","fragments","key","value","replaceWith","unblock","isEmptyObject","result","messages","prepend","blur","scroll_to_notices","handleUnloadEvent","navigator","userAgent","indexOf","documentMode","preventDefault","attachUnloadEventsOnSubmit","detachUnloadEventsOnSubmit","unbind","blockOnSubmit","triggerHandler","ajaxSetup","dataFilter","raw_response","dataType","maybe_valid_json","match","console","log","checkout_url","redirect","decodeURI","err","refresh","submit_error","i18n_checkout_error","error","jqXHR","textStatus","errorThrown","error_message","scrollElement","wc_checkout_coupons","show_coupon_form","remove_coupon","slideToggle","focus","apply_coupon_nonce","coupon_code","code","before","container","parents","coupon","remove_coupon_nonce","debug_mode","responseText","wc_checkout_login_form","show_login_form","wc_terms_toggle","toggle_terms","link_toggle"],"mappings":"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"}