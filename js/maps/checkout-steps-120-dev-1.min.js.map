{"version":3,"file":"../checkout-steps-120-dev-1.min.js","sources":["checkout-steps-120-dev-1.js"],"sourcesContent":["/**\n * Manage checkout steps state.\n *\n * DEPENDS ON:\n * - jQuery // Interact with WooCommerce events\n */\n(function (root, factory) {\n\tif ( typeof define === 'function' && define.amd ) {\n\t\tdefine([], factory(root));\n\t} else if ( typeof exports === 'object' ) {\n\t\tmodule.exports = factory(root);\n\t} else {\n\t\troot.CheckoutSteps = factory(root);\n\t}\n})(typeof global !== 'undefined' ? global : this.window || this.global, function (root) {\n\n\t'use strict';\n\n\tvar $ = jQuery;\n\n\tvar _hasInitialized = false;\n\tvar _publicMethods = { };\n\tvar _settings = {\n\t\tbodyClass: 'has-wfc-checkout-steps',\n\t\tbodyClassActiveStepPattern: 'wfc-checkout-step--active-{ID}',\n\n\t\tsubstepSelector: '.wfc-step__substep',\n\t\tsubstepFieldsSelector: '.wfc-step__substep-fields',\n\t\tsubstepTextSelector: '.wfc-step__substep-text',\n\t\tsubstepEditButtonSelector: '[data-step-edit]',\n\t\tsubstepSaveButtonSelector: '[data-step-save]',\n\t\tsubstepEditingClass: 'is-editing',\n\t}\n\n\n\n\t/**\n\t * METHODS\n\t */\n\n\n\n\t/*!\n\t* Merge two or more objects together.\n\t* (c) 2017 Chris Ferdinandi, MIT License, https://gomakethings.com\n\t* @param   {Boolean}  deep     If true, do a deep (or recursive) merge [optional]\n\t* @param   {Object}   objects  The objects to merge together\n\t* @returns {Object}            Merged values of defaults and options\n\t*/\n\tvar extend = function () {\n\t\t// Variables\n\t\tvar extended = {};\n\t\tvar deep = false;\n\t\tvar i = 0;\n\n\t\t// Check if a deep merge\n\t\tif ( Object.prototype.toString.call( arguments[0] ) === '[object Boolean]' ) {\n\t\t\tdeep = arguments[0];\n\t\t\ti++;\n\t\t}\n\n\t\t// Merge the object into the extended object\n\t\tvar merge = function (obj) {\n\t\t\tfor (var prop in obj) {\n\t\t\t\tif (obj.hasOwnProperty(prop)) {\n\t\t\t\t\t// If property is an object, merge properties\n\t\t\t\t\tif (deep && Object.prototype.toString.call(obj[prop]) === '[object Object]') {\n\t\t\t\t\t\textended[prop] = extend(extended[prop], obj[prop]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\textended[prop] = obj[prop];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Loop through each object and conduct a merge\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar obj = arguments[i];\n\t\t\tmerge(obj);\n\t\t}\n\n\t\treturn extended;\n    };\n\n\n\n\n\t/**\n\t * Expand the substep fields for edition, and collapse the substep values in text format.\n\t *\n\t * @param   HTMLElement  substepElement  Substep element to change the state of.\n\t */\n\tvar expandSubstepEdit = function( substepElement ) {\n\t\t// Bail if editButton not valid\n\t\tif ( ! substepElement ) { return; }\n\n\t\tvar substepFieldsElement = substepElement.querySelector( _settings.substepFieldsSelector );\n\t\tvar substepTextElement = substepElement.querySelector( _settings.substepTextSelector );\n\n\t\t// Change expanded/collapsed states for the fields and text blocks\n\t\tCollapsibleBlock.expand( substepFieldsElement );\n\t\tCollapsibleBlock.collapse( substepTextElement );\n\n\t\t// Add editing class to the substep element\n\t\tsubstepElement.classList.add( _settings.substepEditingClass );\n\t}\n\n\t/**\n\t * Collapse the substep fields, and expand the substep values in text format for review.\n\t *\n\t * @param   HTMLElement  substepElement  Substep element to change the state of.\n\t */\n\t var collapseSubstepEdit = function( substepElement ) {\n\t\t// Bail if editButton not valid\n\t\tif ( ! substepElement ) { return; }\n\n\t\tvar substepFieldsElement = substepElement.querySelector( _settings.substepFieldsSelector );\n\t\tvar substepTextElement = substepElement.querySelector( _settings.substepTextSelector );\n\n\t\t// Change expanded/collapsed states for the fields and text blocks\n\t\tCollapsibleBlock.collapse( substepFieldsElement );\n\t\tCollapsibleBlock.expand( substepTextElement );\n\n\t\t// Remove editing class from the substep element\n\t\tsubstepElement.classList.remove( _settings.substepEditingClass );\n\t}\n\n\n\n\t/**\n\t * Handle document clicks and route to the appropriate function.\n\t */\n\tvar handleClick = function( e ) {\n\t\t// EDIT SUBSTEP\n\t\tif ( e.target.closest( _settings.substepEditButtonSelector ) ) {\n\t\t\tvar editButton = e.target.closest( _settings.substepEditButtonSelector );\n\t\t\tvar substepElement = editButton.closest( _settings.substepSelector );\n\t\t\texpandSubstepEdit( substepElement );\n\t\t}\n\t\t// SAVE SUBSTEP\n\t\telse if ( e.target.closest( _settings.substepSaveButtonSelector ) ) {\n\t\t\tvar saveButton = e.target.closest( _settings.substepSaveButtonSelector );\n\t\t\tvar substepElement = saveButton.closest( _settings.substepSelector );\n\t\t\t// TODO: CHANGE FUNCTION CALL TO VALIDATE SUBSTEP BEFORE COLLAPSING\n\t\t\tcollapseSubstepEdit( substepElement );\n\t\t}\n\t};\n\n\n\n\t/**\n\t * Initialize component and set related handlers.\n\t */\n\t_publicMethods.init = function( options ) {\n\t\tif ( _hasInitialized ) return;\n\n\t\t// Merge settings\n\t\t_settings = extend( _settings, options );\n\n\t\t// TODO: Check if CollapsibleBlocks is loaded before finishing the initialization, and try to load it if not available\n\t\t\n\t\t// Add event listeners\n\t\twindow.addEventListener( 'click', handleClick );\n\n\t\t// Add init class\n\t\tdocument.body.classList.add( _settings.bodyClass );\n\n\t\t_hasInitialized = true;\n\t};\n\n\n\n\t//\n\t// Public APIs\n\t//\n\treturn _publicMethods;\n\n});\n"],"names":["root","factory","define","amd","exports","module","CheckoutSteps","global","this","window","jQuery","handleClick","e","substepTextElement","substepElement","substepFieldsElement","target","closest","_settings","substepEditButtonSelector","substepSelector","querySelector","substepFieldsSelector","substepTextSelector","CollapsibleBlock","expand","collapse","classList","add","substepEditingClass","substepSaveButtonSelector","remove","_hasInitialized","_publicMethods","bodyClass","bodyClassActiveStepPattern","extend","extended","deep","i","Object","prototype","toString","call","arguments","length","obj","prop","hasOwnProperty","merge","init","options","addEventListener","document","body"],"mappings":"CAMA,SAAWA,EAAMC,GACO,mBAAXC,QAAyBA,OAAOC,IAC3CD,OAAO,GAAID,KACmB,iBAAZG,QAClBC,OAAOD,QAAUH,IAEjBD,EAAKM,cAAgBL,IANvB,CAQqB,oBAAXM,OAAyBA,OAASC,KAAKC,QAAUD,KAAKD,OAAQ,SAAUP,gBAIzEU,OAkHU,SAAdC,EAAwBC,GAE3B,IAjBIC,EAzB6BC,EAI7BC,EACAF,EAqCCD,EAAEI,OAAOC,QAASC,EAAUC,4BAE5BL,EADaF,EAAEI,OAAOC,QAASC,EAAUC,2BACbF,QAASC,EAAUE,kBA5CnBN,EA6CbA,KAzChBC,EAAuBD,EAAeO,cAAeH,EAAUI,uBAC/DT,EAAqBC,EAAeO,cAAeH,EAAUK,qBAGjEC,iBAAiBC,OAAQV,GACzBS,iBAAiBE,SAAUb,GAG3BC,EAAea,UAAUC,IAAKV,EAAUW,uBAoC9BjB,EAAEI,OAAOC,QAASC,EAAUY,6BAEjChB,EADaF,EAAEI,OAAOC,QAASC,EAAUY,2BACbb,QAASC,EAAUE,kBA9BhBN,EAgCdA,KA5BlBC,EAAuBD,EAAeO,cAAeH,EAAUI,uBAC/DT,EAAqBC,EAAeO,cAAeH,EAAUK,qBAGjEC,iBAAiBE,SAAUX,GAC3BS,iBAAiBC,OAAQZ,GAGzBC,EAAea,UAAUI,OAAQb,EAAUW,uBA1G5C,IAEIG,GAAkB,EAClBC,EAAiB,GACjBf,EAAY,CACfgB,UAAW,yBACXC,2BAA4B,iCAE5Bf,gBAAiB,qBACjBE,sBAAuB,4BACvBC,oBAAqB,0BACrBJ,0BAA2B,mBAC3BW,0BAA2B,mBAC3BD,oBAAqB,cAkBlBO,EAAS,WAEZ,IAAIC,EAAW,GACXC,GAAO,EACPC,EAAI,EAGgD,qBAAnDC,OAAOC,UAAUC,SAASC,KAAMC,UAAU,MAC9CN,EAAOM,UAAU,GACjBL,KAkBD,KAAOA,EAAIK,UAAUC,OAAQN,KAdjB,SAAUO,GACrB,IAAK,IAAIC,KAAQD,EACZA,EAAIE,eAAeD,KAElBT,GAAsD,oBAA9CE,OAAOC,UAAUC,SAASC,KAAKG,EAAIC,IAC9CV,EAASU,GAAQX,EAAOC,EAASU,GAAOD,EAAIC,IAE5CV,EAASU,GAAQD,EAAIC,IASxBE,CADUL,UAAUL,IAIrB,OAAOF,GA8FR,OAtBAJ,EAAeiB,KAAO,SAAUC,GAC1BnB,IAGLd,EAAYkB,EAAQlB,EAAWiC,GAK/B1C,OAAO2C,iBAAkB,QAASzC,GAGlC0C,SAASC,KAAK3B,UAAUC,IAAKV,EAAUgB,WAEvCF,GAAkB,IAQZC"}