{"version":3,"file":"../mailcheck-init-110-dev-2.min.js","sources":["mailcheck-init.js"],"sourcesContent":["/**\n * Handles Mailcheck runs on email fields\n */\n(function (root, factory) {\n\tif ( typeof define === 'function' && define.amd ) {\n\t\tdefine([], factory(root));\n\t} else if ( typeof exports === 'object' ) {\n\t\tmodule.exports = factory(root);\n\t} else {\n\t\troot.MailcheckInit = factory(root);\n\t}\n})(typeof global !== 'undefined' ? global : this.window || this.global, function (root) {\n\n\t'use strict';\n\n\tvar $ = jQuery;\n\n\tvar _hasInitialized = false;\n\tvar _publicMethods = { }\n\tvar _settings = {\n\t\tmailFieldSelector: '[data-mailcheck]',\n\t\tmailFieldSuggestedClass: 'has-email-suggestion',\n\t\tsuggestionElementSelector: '[data-mailcheck-suggestion]',\n\t\tsuggestedElementTemplate: '<div class=\"wfc-mailcheck-suggestion\" data-mailcheck-suggestion>Did you mean <a class=\"mailcheck-suggestion\" href=\"#apply-suggestion\" data-mailcheck-apply>{suggestion}</a>?</div>',\n\t\tsuggestionTemplate: '{address}@<span class=\"mailcheck-suggestion-domain\">{domain}</span>',\n\t}\n\tvar _tempTarget = null;\n\n\n\n\t/**\n\t * METHODS\n\t */\n\n\n\n\tvar handleSuggested = function( suggestion ) {\n\t\tremoveSuggestions();\n\n\t\tif ( _tempTarget === null ) return;\n\n\t\tvar suggestionHtml = _settings.suggestionTemplate.replace( '{address}', suggestion.address ).replace( '{domain}', suggestion.domain );\n\t\tvar suggestedElementHtml = _settings.suggestedElementTemplate.replace( '{suggestion}', suggestionHtml );\n\n\t\t// Create suggestion element and add it after the field\n\t\tvar parent = _tempTarget.parentNode;\n\t\tvar element = document.createElement( 'div' );\n\t\telement.innerHTML = suggestedElementHtml;\n\t\tparent.insertBefore( element.firstChild, _tempTarget.nextSibling );\n\t\telement = null;\n\n\t\t_tempTarget.classList.add( _settings.mailFieldSuggestedClass );\n\t}\n\n\n\n\tvar removeSuggestions = function() {\n\t\tif ( _tempTarget === null ) return;\n\t\t\n\t\tvar parent = _tempTarget.parentNode;\n\t\tvar suggestions = parent.querySelectorAll( _settings.suggestionElementSelector );\n\t\t\n\t\tfor ( var i = 0; i < suggestions.length; i++ ) {\n\t\t\t// console.log(suggestions[i]);\n\t\t\tsuggestions[i].parentNode.removeChild( suggestions[i] );\n\t\t}\n\n\t\t_tempTarget.classList.remove( _settings.mailFieldSuggestedClass );\n\t}\n\n\n\n\t/**\n\t * Handle captured keyup event and route to appropriate function.\n\t * @param  {Event} e Event data.\n\t */\n\tvar handleTriggerEvents = function( e ) {\n\t\tif ( Mailcheck !== undefined && e.target.matches( _settings.mailFieldSelector ) ) {\n\t\t\t_tempTarget = e.target;\n\n\t\t\tMailcheck.run( {\n\t\t\t\temail: _tempTarget.value,\n\t\t\t\tsuggested: handleSuggested,\n\t\t\t\tempty: removeSuggestions\n\t\t\t} );\n\n\t\t\t_tempTarget = null;\n\t\t}\n\t};\n\n\n\n\t/**\n\t * Initialize Mailcheck feature\n\t */\n\t_publicMethods.init = function() {\n\t\tif ( _hasInitialized ) return;\n\n\t\t// Add event listeners\n\t\twindow.addEventListener( 'change', handleTriggerEvents, true );\n\n\t\t_hasInitialized = true;\n\t};\n\n\t\n\t//\n\t// Public APIs\n\t//\n\treturn _publicMethods;\n\n});\n"],"names":["root","factory","define","amd","exports","module","MailcheckInit","global","this","window","jQuery","handleSuggested","suggestion","suggestionHtml","suggestedElementHtml","parent","element","removeSuggestions","_tempTarget","_settings","suggestionTemplate","replace","address","domain","suggestedElementTemplate","parentNode","document","createElement","innerHTML","insertBefore","firstChild","nextSibling","classList","add","mailFieldSuggestedClass","handleTriggerEvents","e","undefined","Mailcheck","target","matches","mailFieldSelector","run","email","value","suggested","empty","_hasInitialized","_publicMethods","suggestionElementSelector","suggestions","querySelectorAll","i","length","removeChild","remove","init","addEventListener"],"mappings":"CAGA,SAAWA,EAAMC,GACO,mBAAXC,QAAyBA,OAAOC,IAC3CD,OAAO,GAAID,KACmB,iBAAZG,QAClBC,OAAOD,QAAUH,IAEjBD,EAAKM,cAAgBL,IANvB,CAQqB,oBAAXM,OAAyBA,OAASC,KAAKC,QAAUD,KAAKD,OAAQ,SAAUP,gBAIzEU,OAqBc,SAAlBC,EAA4BC,GAG/B,IAEIC,EACAC,EAGAC,EACAC,EATJC,IAEqB,OAAhBC,IAEDL,EAAiBM,EAAUC,mBAAmBC,QAAS,YAAaT,EAAWU,SAAUD,QAAS,WAAYT,EAAWW,QACzHT,EAAuBK,EAAUK,yBAAyBH,QAAS,eAAgBR,GAGnFE,EAASG,EAAYO,YACrBT,EAAUU,SAASC,cAAe,QAC9BC,UAAYd,EACpBC,EAAOc,aAAcb,EAAQc,WAAYZ,EAAYa,aACrDf,EAAU,KAEVE,EAAYc,UAAUC,IAAKd,EAAUe,0BAyBZ,SAAtBC,EAAgCC,QAChBC,IAAdC,WAA2BF,EAAEG,OAAOC,QAASrB,EAAUsB,qBAC3DvB,EAAckB,EAAEG,OAEhBD,UAAUI,IAAK,CACdC,MAAOzB,EAAY0B,MACnBC,UAAWlC,EACXmC,MAAO7B,IAGRC,EAAc,MAvEhB,IAEI6B,GAAkB,EAClBC,EAAiB,GACjB7B,EAAY,CACfsB,kBAAmB,mBACnBP,wBAAyB,uBACzBe,0BAA2B,8BAC3BzB,yBAA0B,qLAC1BJ,mBAAoB,uEAEjBF,EAAc,KA8BdD,EAAoB,WACvB,GAAqB,OAAhBC,EAAL,CAKA,IAHA,IACIgC,EADShC,EAAYO,WACA0B,iBAAkBhC,EAAU8B,2BAE3CG,EAAI,EAAGA,EAAIF,EAAYG,OAAQD,IAExCF,EAAYE,GAAG3B,WAAW6B,YAAaJ,EAAYE,IAGpDlC,EAAYc,UAAUuB,OAAQpC,EAAUe,2BAyCzC,OAbAc,EAAeQ,KAAO,WAChBT,IAGLtC,OAAOgD,iBAAkB,SAAUtB,GAAqB,GAExDY,GAAkB,IAOZC"}