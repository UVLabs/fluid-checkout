!function(e,t){"function"==typeof define&&define.amd?define([],t()):"object"==typeof exports?module.exports=t():e.AddressBook=t()}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var s=jQuery,c=null!=s,t=!1,a={},n="wfc-address-book--active",r=".wfc-address-book",i=".address-book",o=".address-book__entry-radio",d="[data-address-book-new]",l="[data-address-book-same]",u="input, select, textarea",f="#shipping_first_name, #shipping_last_name, #shipping_phone, #shipping_company, #shipping_address_1, #shipping_address_2, #shipping_country, #shipping_state, #shipping_postcode, #shipping_city, #billing_country, #billing_state",g='[name$="_address_id"], #shipping_address_save, #billing_address_save',p='[name$="_address_id"]:checked',h=".form-row",_='[class*="select2"]',m="#billing_country, select#billing_state",b="#billing_first_name, #billing_last_name, #billing_phone",v="[data-field-edited]",y="data-address",k="data-address-type",A="data-address-same-as-checked",w="data-copy-to-field",S="data-field-edited",q="active",x=!0,L="";function O(e,t){e=function(e,t){if(!e||!t)return!1;for(var a={},n=t.getAttribute(k),r=e.querySelectorAll(u),i=0;i<r.length;i++){var o=r[i];a[o.getAttribute("name").replace(n+"_","")]=o.value}return a}(e,t),e=JSON.stringify(e),t.setAttribute(y,e)}function j(e,t){e&&(t=null==t||null==t?"":t,e.value=t,c&&e.matches(_)&&(s(e).val(t),s(e).select2().trigger("change")),window.CheckoutValidation&&CheckoutValidation.clearValidationResults(e,e.closest(h)))}function V(e,t){if(x&&t){$(e);var a=function(e){try{var t=e.getAttribute(y);return JSON.parse(t)}catch(e){return!1}}(t);if(a)for(var n=t.getAttribute(k),r=Object.keys(a),i=0;i<r.length;i++){var o=r[i],s=n+"_"+r[i],s=e.querySelector('[name="'+s+'"]');j(s,a[o])}}}function C(){x&&s(document.body).trigger("update_checkout")}function J(e){var t,a,n=e.closest(r);a=e,(t=n)&&a&&((t=t.querySelector(".wfc-address-book__form-wrapper"))&&(a.matches(d)?t.classList.add(q):t.classList.remove(q))),a=e,(t=n)&&a&&((t=t.querySelector(i))&&(a.matches(l)?t.setAttribute(A,"1"):t.removeAttribute(A))),V(n,e),C()}function N(e){var t;!x||(e=(t=e.target.closest(r)).querySelector(p))&&e.matches(d)&&(O(t,e),C())}function T(e){var t;e.target.matches(o)?J(e.target):e.target.matches(b)?function(e){var t=e.getAttribute(w);if(t&&""!=t)for(var a=document.querySelectorAll(t),n=0;n<a.length;n++){var r=a[n];r.matches(v)||(r.value=e.value)}}(e.target):e.target.matches(L)&&(t=e.target)&&t.setAttribute(S,"1")}var $=function(e){if(e){x=!1;for(var t=e.querySelectorAll(u),a=0;a<t.length;a++){var n=t[a];n.matches(g)||j(n,"")}x=!0}},B=function(){var e,n,r,i,o;c&&(n=N,r=500,e=function(){var e=this,t=arguments,a=i&&!o;clearTimeout(o),o=setTimeout(function(){o=null,i||n.apply(e,t)},r),a&&n.apply(e,t)},s(f).off("change",e),s(f).on("change",e))},E=function(){if(c)for(var e=document.querySelectorAll(m),t=0;t<e.length;t++){var a=e[t];"select"==a.type&&s(a).select2()}};return a.init=function(){t||(window.addEventListener("change",T),s(document.body).on("updated_checkout",B),s(document.body).on("updated_checkout",E),B(),E(),function(){for(var e=document.querySelectorAll(b),t=0;t<e.length;t++){var a=e[t].getAttribute(w);-1==L.indexOf(a)&&(L+=0<L.length?", ":"",L+=a)}}(),document.body.classList.add(n),t=!0)},a});
//# sourceMappingURL=maps/address-book-110-dev-121.min.js.map
